/*
	Connection close test
*/

var timer = setTimeout(function () {
	error("timeout - the test has taken too long");
	process.exit(-2);
}, 10000);

TestClient.on('message', function (msg) {
	console.log("recv ".grey + msg);
});

TestClient.on('send', function (msg) {
	console.log("send ".grey + msg);
});

TestClient.on('disconnect', function (e) {
	ok("sucessfully disconected from server");
	ok("disconection test passed");
	clearTimeout(timer);
	runNextTest();
});

testing("disconnection test");
TestClient.disconnect();
